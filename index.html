<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Profile - Call Center Interface</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700;800&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            margin: 0;
            min-height: 100vh;
        }

        /* Header Section */
        .header-container {
            background: linear-gradient(135deg, #0c1427 0%, #1a1f3a 50%, #0f172a 100%);
            border-bottom: 2px solid #334155;
            padding: 20px 24px;
            position: relative;
            overflow: hidden;
        }

        .header-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.08) 0%, transparent 50%);
            opacity: 0.6;
        }

        .company-header {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .company-info {
            flex: 1;
        }

        .company-name {
            font-family: 'Poppins', 'Inter', sans-serif;
            font-size: 2.8em;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .location-timezone {
            font-family: 'Rajdhani', 'Inter', sans-serif;
            font-size: 1.4em;
            color: #94a3b8;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .useful-links {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .link-btn {
            background: #334155;
            color: #e2e8f0;
            padding: 10px 16px;
            border: 1px solid #475569;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .link-btn:hover {
            background: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 24px;
            padding: 24px;
            min-height: calc(100vh - 140px);
        }

        /* Left Navigation */
        .nav-sidebar {
            background: #1e293b;
            border-radius: 12px;
            border: 1px solid #334155;
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 24px;
        }

        .nav-title {
            font-family: 'Rajdhani', 'Inter', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid #475569;
            padding-bottom: 8px;
        }

        .nav-link {
            display: block;
            color: #cbd5e1;
            text-decoration: none;
            padding: 12px 16px;
            margin: 6px 0;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: #334155;
            border: 1px solid #475569;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link:hover, .nav-link.active {
            background: #3b82f6;
            color: #f8fafc;
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        /* Main Content Area */
        .content-area {
            background: #1e293b;
            border-radius: 12px;
            border: 1px solid #334155;
            padding: 24px;
            min-height: 600px;
        }

        /* Bulletin Section */
        .bulletin-section {
            background: #451a03;
            border: 1px solid #f59e0b;
            border-left: 4px solid #f59e0b;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .bulletin-title {
            font-weight: 700;
            color: #fbbf24;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .bulletin-content {
            color: #fef3c7;
            line-height: 1.5;
        }

        /* Pests Not Covered */
        .pests-not-covered {
            background: #7f1d1d;
            border: 1px solid #ef4444;
            border-left: 4px solid #ef4444;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .pests-title {
            font-weight: 700;
            color: #fca5a5;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .pests-content {
            color: #fecaca;
            line-height: 1.5;
        }

        /* Service Cards */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .service-card {
            background: #0f172a;
            border: 1px solid #475569;
            border-left: 4px solid #10b981;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.2);
        }

        .service-title {
            font-family: 'Rajdhani', 'Inter', sans-serif;
            font-size: 1.3em;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 12px;
        }

        .service-description {
            color: #94a3b8;
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .service-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            font-size: 0.9em;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: #334155;
            border-radius: 6px;
        }

        .detail-label {
            color: #94a3b8;
            font-weight: 500;
        }

        .detail-value {
            color: #e2e8f0;
            font-weight: 600;
        }

        /* Right Sidebar Tools */
        .tools-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .tool-card {
            background: #1e293b;
            border-radius: 12px;
            border: 1px solid #334155;
            padding: 20px;
        }

        .tool-title {
            font-family: 'Rajdhani', 'Inter', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Acreage Converter */
        .converter-input {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .converter-input input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid #475569;
            border-radius: 6px;
            background: #334155;
            color: #e2e8f0;
            font-size: 16px;
        }

        .converter-input input::placeholder {
            color: #94a3b8;
        }

        .convert-btn {
            background: #3b82f6;
            color: #f8fafc;
            border: none;
            border-radius: 6px;
            padding: 10px 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .convert-btn:hover {
            background: #2563eb;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .converter-result {
            color: #10b981;
            font-weight: 600;
            font-size: 1.1em;
            margin-top: 8px;
        }

        /* Zip Code Lookup */
        .zip-lookup {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .zip-lookup input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid #475569;
            border-radius: 6px;
            background: #334155;
            color: #e2e8f0;
            font-size: 16px;
        }

        .search-btn {
            background: #10b981;
            color: #f8fafc;
            border: none;
            border-radius: 6px;
            padding: 10px 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: #059669;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .zip-result {
            padding: 12px;
            border-radius: 6px;
            margin-top: 8px;
            font-weight: 600;
            display: none;
        }

        .zip-result.success {
            background: #064e3b;
            border: 1px solid #10b981;
            color: #6ee7b7;
        }

        .zip-result.error {
            background: #7f1d1d;
            border: 1px solid #ef4444;
            color: #fca5a5;
        }

        /* Time Display */
        .time-display {
            background: #334155;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .time-zone {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 0.9em;
        }

        .time-label {
            color: #94a3b8;
        }

        .time-value {
            color: #e2e8f0;
            font-weight: 600;
            font-family: 'Rajdhani', monospace;
        }

        /* Weather Forecast */
        .weather-display {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 16px;
            margin-top: 8px;
        }

        .weather-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid #334155;
        }

        .weather-title {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1em;
            font-weight: 600;
            color: #e2e8f0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .weather-forecast {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .weather-day {
            text-align: center;
            padding: 8px 4px;
            background: #0f172a;
            border: 1px solid #475569;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .weather-day:hover {
            background: #1e293b;
            border-color: #64748b;
            transform: translateY(-1px);
        }

        .weather-day-name {
            font-size: 0.7em;
            font-weight: 600;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .weather-icon {
            font-size: 1.4em;
            margin: 4px 0;
        }

        .weather-temp {
            font-size: 0.85em;
            font-weight: 600;
            color: #e2e8f0;
            margin: 2px 0;
        }

        .weather-rain {
            font-size: 0.7em;
            color: #60a5fa;
            font-weight: 500;
        }

        .weather-loading {
            text-align: center;
            color: #64748b;
            font-style: italic;
            padding: 20px;
        }

        /* Office Information Modal Styles */
        .office-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .office-modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1e293b;
            border-radius: 12px;
            border: 1px solid #334155;
            padding: 24px;
            max-width: 600px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid #475569;
        }

        .modal-title {
            font-family: 'Rajdhani', 'Inter', sans-serif;
            font-size: 1.4em;
            font-weight: 700;
            color: #f1f5f9;
        }

        .close-btn {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.5em;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #ef4444;
            color: #f8fafc;
        }

        .office-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .info-item {
            padding: 12px;
            background: #334155;
            border-radius: 8px;
        }

        .info-label {
            color: #94a3b8;
            font-size: 0.9em;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .info-value {
            color: #e2e8f0;
            font-weight: 600;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .nav-sidebar {
                position: static;
                order: -1;
            }
            
            .tools-sidebar {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 16px;
            }
        }

        /* Section Content Styles */
        .section-content {
            display: none;
        }

        .section-content.active {
            display: block;
        }

        .page-title {
            font-family: 'Rajdhani', 'Inter', sans-serif;
            font-size: 2em;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 24px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Updated Button */
        .updated-btn {
            background: #334155;
            color: #e2e8f0;
            border: 1px solid #475569;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 12px;
        }

        .updated-btn:hover {
            background: #475569;
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <div class="header-container">
        <div class="company-header">
            <div class="company-info">
                <h1 class="company-name" id="companyName">Loading Company...</h1>
                <div class="location-timezone" id="locationTimezone">Loading Location...</div>
            </div>
            <div class="useful-links">
                <a href="#" class="link-btn" id="pricingLink">
                    <span>üí∞</span> Pricing Lookup
                </a>
                <a href="#" class="link-btn" id="fieldRoutesLink" target="_blank">
                    <span>üìã</span> FieldRoutes
                </a>
                <a href="#" class="link-btn" id="websiteLink" target="_blank">
                    <span>üåê</span> Website
                </a>
                <button class="link-btn" id="officeInfoBtn">
                    <span>üè¢</span> Office Info
                </button>
            </div>
        </div>
        <button class="updated-btn" id="updatedBtn">Updated: Loading...</button>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Left Navigation -->
        <nav class="nav-sidebar">
            <h3 class="nav-title">üß≠ Navigation</h3>
            <a href="#" class="nav-link active" data-section="services">
                <span>üõ°Ô∏è</span> Services
            </a>
            <a href="#" class="nav-link" data-section="technicians">
                <span>üë®‚Äçüîß</span> Technicians
            </a>
            <a href="#" class="nav-link" data-section="policies">
                <span>üìú</span> Policies
            </a>
            <a href="#" class="nav-link" data-section="areas">
                <span>üìç</span> Service Areas
            </a>
            <a href="#" class="nav-link" data-section="discounts">
                <span>üí∏</span> Discounts
            </a>
        </nav>

        <!-- Main Content -->
        <main class="content-area">
            <!-- Bulletin Section -->
            <div class="bulletin-section" id="bulletinSection" style="display: none;">
                <div class="bulletin-title">üì¢ Bulletin</div>
                <div class="bulletin-content" id="bulletinContent"></div>
            </div>

            <!-- Pests Not Covered -->
            <div class="pests-not-covered" id="pestsNotCoveredSection" style="display: none;">
                <div class="pests-title">üö´ Pests Not Covered</div>
                <div class="pests-content" id="pestsNotCoveredContent"></div>
            </div>

            <!-- Services Section -->
            <div class="section-content active" id="servicesSection">
                <h2 class="page-title">üõ°Ô∏è Services</h2>
                <div class="services-grid" id="servicesGrid">
                    <!-- Services will be dynamically loaded here -->
                </div>
            </div>

            <!-- Technicians Section -->
            <div class="section-content" id="techniciansSection">
                <h2 class="page-title">üë®‚Äçüîß Technicians & Scheduling</h2>
                <div id="techniciansContent">
                    <!-- Technicians content will be loaded here -->
                </div>
            </div>

            <!-- Policies Section -->
            <div class="section-content" id="policiesSection">
                <h2 class="page-title">üìú Policies</h2>
                <div id="policiesContent">
                    <!-- Policies content will be loaded here -->
                </div>
            </div>

            <!-- Service Areas Section -->
            <div class="section-content" id="areasSection">
                <h2 class="page-title">üìç Service Areas</h2>
                <div id="areasContent">
                    <!-- Service areas content will be loaded here -->
                </div>
            </div>

            <!-- Discounts Section -->
            <div class="section-content" id="discountsSection">
                <h2 class="page-title">üí∏ Discounts</h2>
                <div id="discountsContent">
                    <!-- Discounts content will be loaded here -->
                </div>
            </div>
        </main>

        <!-- Right Sidebar Tools -->
        <aside class="tools-sidebar">
            <!-- Acreage to Square Footage Converter -->
            <div class="tool-card">
                <h3 class="tool-title">üìê Acreage Converter</h3>
                <div class="converter-input">
                    <input type="text" id="acresInput" placeholder="Enter acres (e.g., 1.5 or 3/4)">
                    <button class="convert-btn" onclick="convertAcres()">Convert</button>
                </div>
                <div class="converter-result" id="squareFootageResult"></div>
            </div>

            <!-- Zip Code Lookup -->
            <div class="tool-card">
                <h3 class="tool-title">üìç Zip Code Lookup</h3>
                <div class="zip-lookup">
                    <input type="text" id="zipInput" placeholder="Enter zip code" maxlength="5">
                    <button class="search-btn" onclick="searchZip()">Search</button>
                </div>
                <div class="zip-result" id="zipResult"></div>
            </div>

            <!-- Time Display -->
            <div class="tool-card">
                <h3 class="tool-title">üïí Current Time</h3>
                <div class="time-display">
                    <div class="time-zone">
                        <span class="time-label">Pacific:</span>
                        <span class="time-value" id="pacificTime">--:--:-- --</span>
                    </div>
                    <div class="time-zone">
                        <span class="time-label">Mountain:</span>
                        <span class="time-value" id="mountainTime">--:--:-- --</span>
                    </div>
                    <div class="time-zone">
                        <span class="time-label">Central:</span>
                        <span class="time-value" id="centralTime">--:--:-- --</span>
                    </div>
                    <div class="time-zone">
                        <span class="time-label">Eastern:</span>
                        <span class="time-value" id="easternTime">--:--:-- --</span>
                    </div>
                </div>
            </div>

            <!-- Weather Forecast -->
            <div class="tool-card">
                <h3 class="tool-title">üå§Ô∏è 7-Day Forecast</h3>
                <div class="weather-display">
                    <div class="weather-loading" id="weatherLoading">Loading weather...</div>
                    <div class="weather-forecast" id="weatherForecast" style="display: none;">
                        <!-- Weather days will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Office Information Modal -->
    <div class="office-modal" id="officeModal">
        <div class="office-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üè¢ Office Information</h3>
                <button class="close-btn" onclick="closeOfficeModal()">&times;</button>
            </div>
            <div class="office-info-grid" id="officeInfoGrid">
                <!-- Office information will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let clientData = {};
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupNavigation();
            setupTimeUpdates();
            setupWeatherForecast();
            setupZipInputEnter();
        });

        // Initialize page with client data
        function initializePage() {
            // Get client ID from URL or set default for testing
            const urlParams = new URLSearchParams(window.location.search);
            const clientId = urlParams.get('clientId') || 'test-client';
            
            // Load client data (this would normally come from Wix database)
            loadClientData(clientId);
        }

        // Load client data from Wix database
        function loadClientData(clientId) {
            // This is a placeholder - in real implementation, this would query Wix database
            // For now, using sample data that matches your form structure
            clientData = {
                companyName: "Addison Pest Control",
                location: "Frisco, Texas",
                timezone: "Central",
                officeInfo: {
                    phone: "(972) 555-0123",
                    email: "contact@addisonpest.com",
                    website: "https://www.addisonpest.com",
                    fieldRoutesLink: "https://addison.fieldroutes.com/",
                    physicalAddress: "123 Main Street\nFrisco, TX 75034",
                    officeHours: "Monday-Friday: 8:00 AM - 5:00 PM\nSaturday: 8:00 AM - 12:00 PM\nSunday: Closed"
                },
                bulletin: "Davidson Pest Control has merged with Dynasty Pest Control. Welcome Davidson customers to the Dynasty family.",
                pestsNotCovered: "Stinging Insects, Skunks, Grubs",
                services: [
                    {
                        name: "General Pest ADVANTAGE",
                        description: "The Advantage PC plan provides thorough initial service with ongoing exterior protection.",
                        firstPrice: "$150",
                        recurringPrice: "$45",
                        contract: "12 Months",
                        guarantee: "Unlimited Reservices",
                        duration: "35 Minutes",
                        pests: "Roaches, Ants, Spiders, Scorpions, Silverfish"
                    }
                ]
            };
            
            populateClientData();
        }

        // Populate page with client data
        function populateClientData() {
            // Update header
            document.getElementById('companyName').textContent = clientData.companyName;
            document.getElementById('locationTimezone').textContent = `${clientData.location} ‚Ä¢ ${clientData.timezone} Time`;
            
            // Update links
            if (clientData.officeInfo.website) {
                document.getElementById('websiteLink').href = clientData.officeInfo.website;
            }
            if (clientData.officeInfo.fieldRoutesLink) {
                document.getElementById('fieldRoutesLink').href = clientData.officeInfo.fieldRoutesLink;
            }
            
            // Show/hide bulletin
            if (clientData.bulletin) {
                document.getElementById('bulletinSection').style.display = 'block';
                document.getElementById('bulletinContent').textContent = clientData.bulletin;
            }
            
            // Show/hide pests not covered
            if (clientData.pestsNotCovered) {
                document.getElementById('pestsNotCoveredSection').style.display = 'block';
                document.getElementById('pestsNotCoveredContent').textContent = clientData.pestsNotCovered;
            }
            
            // Load services
            loadServices();
            
            // Load office information
            loadOfficeInformation();
        }

        // Load services into grid
        function loadServices() {
            const servicesGrid = document.getElementById('servicesGrid');
            servicesGrid.innerHTML = '';
            
            clientData.services.forEach(service => {
                const serviceCard = createServiceCard(service);
                servicesGrid.appendChild(serviceCard);
            });
        }

        // Create service card element
        function createServiceCard(service) {
            const card = document.createElement('div');
            card.className = 'service-card';
            
            card.innerHTML = `
                <div class="service-title">${service.name}</div>
                <div class="service-description">${service.description}</div>
                <div class="service-details">
                    <div class="detail-item">
                        <span class="detail-label">First Price:</span>
                        <span class="detail-value">${service.firstPrice}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Recurring:</span>
                        <span class="detail-value">${service.recurringPrice}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Contract:</span>
                        <span class="detail-value">${service.contract}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Guarantee:</span>
                        <span class="detail-value">${service.guarantee}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Duration:</span>
                        <span class="detail-value">${service.duration}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Pests:</span>
                        <span class="detail-value">${service.pests}</span>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Setup navigation
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.section-content');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetSection = this.getAttribute('data-section');
                    
                    // Update active nav link
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show target section
                    sections.forEach(s => s.classList.remove('active'));
                    document.getElementById(targetSection + 'Section').classList.add('active');
                });
            });
        }

        // Time update functions
        function setupTimeUpdates() {
            updateTime();
            setInterval(updateTime, 1000);
        }

        function updateTime() {
            const now = new Date();
            const utcHours = now.getUTCHours();
            const utcMinutes = now.getUTCMinutes();
            const utcSeconds = now.getUTCSeconds();
            
            document.getElementById('pacificTime').textContent = getTimeInTimeZone(utcHours, utcMinutes, utcSeconds, -8);
            document.getElementById('mountainTime').textContent = getTimeInTimeZone(utcHours, utcMinutes, utcSeconds, -7);
            document.getElementById('centralTime').textContent = getTimeInTimeZone(utcHours, utcMinutes, utcSeconds, -6);
            document.getElementById('easternTime').textContent = getTimeInTimeZone(utcHours, utcMinutes, utcSeconds, -5);
        }

        function getTimeInTimeZone(utcHours, utcMinutes, utcSeconds, offset) {
            let hours = (utcHours + offset) % 24;
            hours = hours < 0 ? 24 + hours : hours;
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12;
            const minutes = utcMinutes.toString().padStart(2, '0');
            const seconds = utcSeconds.toString().padStart(2, '0');
            
            return `${hours}:${minutes}:${seconds} ${ampm}`;
        }

        // Weather forecast functions
        function setupWeatherForecast() {
            loadWeatherForecast();
        }

        async function loadWeatherForecast() {
            try {
                // Get location from client data
                const location = clientData.location || "Dallas, TX";
                console.log('Loading weather for:', location);
                
                // First, get coordinates for the location
                const coordinates = await getCoordinatesFromLocation(location);
                if (!coordinates) {
                    displayWeatherError("Could not find location coordinates");
                    return;
                }
                
                // Then get weather data using coordinates
                const weatherData = await getWeatherData(coordinates.lat, coordinates.lon);
                if (weatherData) {
                    displayWeatherForecast(weatherData);
                } else {
                    displayWeatherError("Could not load weather data");
                }
            } catch (error) {
                console.error('Weather loading error:', error);
                displayWeatherError("Weather service unavailable");
            }
        }

        async function getCoordinatesFromLocation(location) {
            try {
                // Use OpenWeatherMap's Geocoding API
                const apiKey = 'demo_key'; // You'll need to replace this with your actual API key
                const geocodeUrl = `https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(location)}&limit=1&appid=${apiKey}`;
                
                // For demo purposes, let's use a fallback service that doesn't require an API key
                // In production, you should use OpenWeatherMap with a proper API key
                return await getCoordinatesFromNominatim(location);
                
            } catch (error) {
                console.error('Geocoding error:', error);
                return null;
            }
        }

        async function getCoordinatesFromNominatim(location) {
            try {
                // Using Nominatim (OpenStreetMap) which doesn't require API key
                const geocodeUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(location)}&limit=1`;
                
                const response = await fetch(geocodeUrl);
                const data = await response.json();
                
                if (data && data.length > 0) {
                    return {
                        lat: parseFloat(data[0].lat),
                        lon: parseFloat(data[0].lon)
                    };
                }
                return null;
            } catch (error) {
                console.error('Nominatim geocoding error:', error);
                return null;
            }
        }

        async function getWeatherData(lat, lon) {
            try {
                // For demo purposes, we'll use Open-Meteo which is free and doesn't require API key
                const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,weather_code&timezone=auto&forecast_days=7`;
                
                const response = await fetch(weatherUrl);
                const data = await response.json();
                
                if (data && data.daily) {
                    return formatWeatherData(data);
                }
                return null;
            } catch (error) {
                console.error('Weather API error:', error);
                return null;
            }
        }

        function formatWeatherData(apiData) {
            const daily = apiData.daily;
            const days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
            
            return daily.time.map((date, index) => {
                const dateObj = new Date(date);
                const dayIndex = dateObj.getDay();
                const maxTemp = Math.round(daily.temperature_2m_max[index]);
                const minTemp = Math.round(daily.temperature_2m_min[index]);
                const rainChance = daily.precipitation_probability_max[index] || 0;
                const weatherCode = daily.weather_code[index];
                
                // Convert Celsius to Fahrenheit
                const maxTempF = Math.round((maxTemp * 9/5) + 32);
                const minTempF = Math.round((minTemp * 9/5) + 32);
                
                return {
                    day: days[dayIndex],
                    icon: getWeatherIconFromCode(weatherCode, rainChance),
                    temp: maxTempF,
                    lowTemp: minTempF,
                    rainChance: rainChance,
                    isRaining: rainChance > 50
                };
            });
        }

        function getWeatherIconFromCode(weatherCode, rainChance) {
            // Weather code mapping for Open-Meteo API
            // https://open-meteo.com/en/docs
            if (weatherCode >= 80 && weatherCode <= 99) return '‚õàÔ∏è'; // Thunderstorms
            if (weatherCode >= 61 && weatherCode <= 82) return 'üåßÔ∏è'; // Rain
            if (weatherCode >= 51 && weatherCode <= 67) return 'üå¶Ô∏è'; // Drizzle/Light rain
            if (weatherCode >= 71 && weatherCode <= 77) return 'üå®Ô∏è'; // Snow
            if (weatherCode >= 2 && weatherCode <= 3) return '‚õÖ'; // Partly cloudy
            if (weatherCode >= 45 && weatherCode <= 48) return 'üå´Ô∏è'; // Fog
            if (weatherCode === 1) return 'üå§Ô∏è'; // Mainly clear
            if (weatherCode === 0) return '‚òÄÔ∏è'; // Clear sky
            
            // Fallback based on rain chance
            if (rainChance > 70) return 'üåßÔ∏è';
            if (rainChance > 40) return 'üå¶Ô∏è';
            if (rainChance > 20) return '‚õÖ';
            return '‚òÄÔ∏è';
        }

        function displayWeatherError(message) {
            const loadingEl = document.getElementById('weatherLoading');
            loadingEl.textContent = message;
            loadingEl.style.color = '#ef4444';
        }

        function displayWeatherForecast(weatherData) {
            const loadingEl = document.getElementById('weatherLoading');
            const forecastEl = document.getElementById('weatherForecast');
            
            loadingEl.style.display = 'none';
            forecastEl.style.display = 'grid';
            
            forecastEl.innerHTML = weatherData.map(day => `
                <div class="weather-day">
                    <div class="weather-day-name">${day.day}</div>
                    <div class="weather-icon">${day.icon}</div>
                    <div class="weather-temp">${day.temp}¬∞F</div>
                    <div class="weather-rain">${day.rainChance}%</div>
                </div>
            `).join('');
        }

        // Acreage converter
        function convertAcres() {
            const acresInput = document.getElementById('acresInput').value;
            const resultDiv = document.getElementById('squareFootageResult');
            
            if (!acresInput) {
                resultDiv.textContent = 'Please enter acres value';
                return;
            }
            
            const fractionPattern = /^(\d+)\s?\/\s?(\d+)$/;
            let decimal = parseFloat(acresInput);
            const match = fractionPattern.exec(acresInput);
            
            if (match) {
                const numerator = parseInt(match[1]);
                const denominator = parseInt(match[2]);
                decimal = numerator / denominator;
            }
            
            if (isNaN(decimal)) {
                resultDiv.textContent = 'Invalid input format';
                return;
            }
            
            const squareFootage = decimal * 43560;
            resultDiv.textContent = `Square Footage: ${squareFootage.toLocaleString()}`;
        }

        // Zip code lookup
        function searchZip() {
            const zipInput = document.getElementById('zipInput').value.replace(/\D/g, '').trim();
            const resultDiv = document.getElementById('zipResult');
            
            if (zipInput.length !== 5) {
                showZipResult('Invalid zip code format.', false);
                return;
            }
            
            // This would normally query your Wix database
            // For demo purposes, using sample data
            const sampleZips = {
                '75034': 'North Dallas Branch',
                '75035': 'North Dallas Branch',
                '75025': 'North Dallas Branch'
            };
            
            if (sampleZips[zipInput]) {
                showZipResult(`Customer in service area. Branch: ${sampleZips[zipInput]}`, true);
            } else {
                showZipResult('Not in service area.', false);
            }
        }

        function showZipResult(message, isSuccess) {
            const resultDiv = document.getElementById('zipResult');
            resultDiv.textContent = message;
            resultDiv.className = 'zip-result ' + (isSuccess ? 'success' : 'error');
            resultDiv.style.display = 'block';
        }

        function setupZipInputEnter() {
            document.getElementById('zipInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchZip();
                }
            });
        }

        // Office information modal
        function loadOfficeInformation() {
            const officeInfoGrid = document.getElementById('officeInfoGrid');
            
            const officeData = [
                { label: 'Phone', value: clientData.officeInfo.phone },
                { label: 'Email', value: clientData.officeInfo.email },
                { label: 'Physical Address', value: clientData.officeInfo.physicalAddress },
                { label: 'Office Hours', value: clientData.officeInfo.officeHours }
            ];
            
            officeInfoGrid.innerHTML = '';
            officeData.forEach(item => {
                const infoItem = document.createElement('div');
                infoItem.className = 'info-item';
                infoItem.innerHTML = `
                    <div class="info-label">${item.label}</div>
                    <div class="info-value">${item.value}</div>
                `;
                officeInfoGrid.appendChild(infoItem);
            });
        }

        document.getElementById('officeInfoBtn').addEventListener('click', function() {
            document.getElementById('officeModal').style.display = 'block';
        });

        function closeOfficeModal() {
            document.getElementById('officeModal').style.display = 'none';
        }

        // Close modal when clicking outside
        document.getElementById('officeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeOfficeModal();
            }
        });
    </script>
</body>
</html>
